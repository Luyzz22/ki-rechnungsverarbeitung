{# Invoice App Header - Enterprise SaaS v6 - CFO Edition #}
<link rel="stylesheet" href="/static/css/app-shell.css" />

<header class="app-global-header">
  <div class="app-global-header-left">
    <button class="app-switcher-btn" id="appSwitcherBtn" aria-label="Apps">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <circle cx="5" cy="5" r="2"/><circle cx="12" cy="5" r="2"/><circle cx="19" cy="5" r="2"/>
        <circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/>
        <circle cx="5" cy="19" r="2"/><circle cx="12" cy="19" r="2"/><circle cx="19" cy="19" r="2"/>
      </svg>
    </button>
    <div class="app-current">
      <div class="app-current-icon" style="background: linear-gradient(135deg, #22d3ee, #06b6d4);">ğŸ§¾</div>
      <div class="app-current-name">
        <span>Rechnungen</span>
        <small>KI-Verarbeitung</small>
      </div>
    </div>
  </div>
  <div class="app-global-header-right">
    <a href="/static/landing/support.html" class="app-header-action" title="Hilfe">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><circle cx="12" cy="17" r="0.5" fill="currentColor"/>
      </svg>
    </a>
    <button class="app-user-btn" id="appUserBtn">
      <div class="app-user-avatar">{% if user and user.name %}{{ user.name[:2]|upper }}{% elif user and user.email %}{{ user.email[:2]|upper }}{% else %}U{% endif %}</div>
      <span class="app-user-name">{% if user and user.name %}{{ user.name }}{% elif user and user.email %}{{ user.email }}{% else %}User{% endif %}</span>
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
    </button>
  </div>
</header>

<div class="app-switcher-panel" id="appSwitcherPanel">
  <div class="app-switcher-header">Ihre Apps</div>
  <div class="app-switcher-grid">
    <a href="/dashboard" class="app-switcher-item">
      <div class="app-switcher-item-icon" style="background: linear-gradient(135deg, #003856, #004d7a);">
        <svg viewBox="0 0 24 24" fill="white" width="24" height="24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
      </div>
      <span class="app-switcher-item-name">Dashboard</span>
    </a>
    <a href="/history" class="app-switcher-item active">
      <div class="app-switcher-item-icon invoice">ğŸ§¾</div>
      <span class="app-switcher-item-name">Rechnungen</span>
      <span class="app-switcher-item-badge">Aktiv</span>
    </a>
    <a href="https://contract.sbsdeutschland.com/" class="app-switcher-item">
      <div class="app-switcher-item-icon contract">ğŸ“‹</div>
      <span class="app-switcher-item-name">VertrÃ¤ge</span>
    </a>
  </div>
  <div class="app-switcher-divider"></div>
  <div class="app-switcher-links">
    <a href="https://sbsdeutschland.com/sbshomepage/" class="app-switcher-link">ğŸŒ Zur Website</a>
    <a href="/static/landing/ressourcen.html" class="app-switcher-link">ğŸ“š Dokumentation</a>
  </div>
</div>

<div class="app-user-menu" id="appUserMenu">
  <div class="app-user-menu-header">
    <div class="app-user-menu-name">{% if user and user.name %}{{ user.name }}{% else %}User{% endif %}</div>
    <div class="app-user-menu-email">{% if user and user.email %}{{ user.email }}{% endif %}</div>
    <span class="app-user-menu-plan">{% if user and user.plan %}{{ user.plan }}{% else %}Free{% endif %}</span>
  </div>
  <div class="app-user-menu-links">
    <a href="/profile" class="app-user-menu-link">âš™ï¸ Profil & Einstellungen</a>
    <a href="/team" class="app-user-menu-link">ğŸ‘¥ Team & Rollen</a>
    <a href="/profile#subscription" class="app-user-menu-link">ğŸ’³ Abonnement & Plan</a>
    <div class="app-user-menu-divider"></div>
    <a href="/logout" class="app-user-menu-link danger">ğŸšª Abmelden</a>
  </div>
</div>

<nav class="app-nav-bar">
  <div class="app-nav-tabs">
    <!-- Dashboard -->
    <a href="/dashboard" class="app-nav-tab {% if active_nav == 'dashboard' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
      Dashboard
    </a>
    
    <!-- Rechnungen Dropdown -->
    <div class="app-nav-dropdown">
      <button class="app-nav-dropdown-btn {% if active_nav == 'invoices' %}active{% endif %}" type="button" onclick="this.parentElement.classList.toggle('open'); document.querySelectorAll('.app-nav-dropdown').forEach(d => { if(d !== this.parentElement) d.classList.remove('open'); }); event.stopPropagation();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
        Rechnungen
        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><polyline points="6 9 12 15 18 9"/></svg>
      </button>
      <div class="app-nav-dropdown-menu">
        <a href="/" class="app-nav-dropdown-item">ğŸ“¤ Neue hochladen</a>
        <a href="/history" class="app-nav-dropdown-item">ğŸ“ Historie</a>
        <div class="app-nav-dropdown-divider"></div>
        <a href="/copilot" class="app-nav-dropdown-item">ğŸ¤– Finance Copilot</a>
        <a href="/accounting" class="app-nav-dropdown-item">ğŸ“Š Auto-Kontierung</a>
      </div>
    </div>
    
    <!-- Freigaben -->
    <a href="/approvals" class="app-nav-tab {% if active_nav == 'approvals' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
      Freigaben
    </a>
    
    <!-- Export Dropdown -->
    <div class="app-nav-dropdown">
      <button class="app-nav-dropdown-btn {% if active_nav == 'export' %}active{% endif %}" type="button" onclick="this.parentElement.classList.toggle('open'); document.querySelectorAll('.app-nav-dropdown').forEach(d => { if(d !== this.parentElement) d.classList.remove('open'); }); event.stopPropagation();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Export
        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><polyline points="6 9 12 15 18 9"/></svg>
      </button>
      <div class="app-nav-dropdown-menu">
        <a href="/datev" class="app-nav-dropdown-item">ğŸ¢ DATEV Export</a>
        <a href="/integrations" class="app-nav-dropdown-item">ğŸ”— Lexoffice / sevDesk</a>
        <div class="app-nav-dropdown-divider"></div>
        <a href="/exports" class="app-nav-dropdown-item">ğŸ“„ Export-Historie</a>
      </div>
    </div>
    
    <!-- NEU: Finanzen/CFO Dropdown -->
    <div class="app-nav-dropdown">
      <button class="app-nav-dropdown-btn {% if active_nav == 'finanzen' %}active{% endif %}" type="button" onclick="this.parentElement.classList.toggle('open'); document.querySelectorAll('.app-nav-dropdown').forEach(d => { if(d !== this.parentElement) d.classList.remove('open'); }); event.stopPropagation();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        Finanzen
        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><polyline points="6 9 12 15 18 9"/></svg>
      </button>
      <div class="app-nav-dropdown-menu">
        <a href="/budget" class="app-nav-dropdown-item">ğŸ“Š Budget-Dashboard</a>
        <a href="/zahlungen" class="app-nav-dropdown-item">ğŸ’° Zahlungen & Skonto</a>
        <div class="app-nav-dropdown-divider"></div>
        <a href="/budget/jahr" class="app-nav-dropdown-item">ğŸ“… JahresÃ¼bersicht</a>
        <a href="/finanzen/offene-posten" class="app-nav-dropdown-item">â° Offene Posten</a>
      </div>
    </div>
    
    <!-- Analytics -->
    <a href="/analytics" class="app-nav-tab {% if active_nav == 'analytics' %}active{% endif %}">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
      Analytics
    </a>
  </div>
</nav>

<div class="app-overlay" id="appOverlay"></div>


<script src="/static/js/app-shell.js"></script>
